<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
	
	<div id="main">

		<h2>Acceso super seguro</h2>
		
		<form v-if="!acceso" @submit.prevent="onSubmit">
			<fieldset>
				<label>Nombre: </label>
				<input v-model="email" placeholder="email Here" name="">
			</fieldset>
			<fieldset>
				<label>Password: </label>
				<input v-model="password" placeholder="password Here" type="password" name="">
			</fieldset>
			<button type="submit">
				Acceder
			</button>
		</form>

		<h3 v-if="acceso">Has accedido correctamente.</h3>
		<table v-if="acceso">
			<thead>
				<tr>
					<th>ID</th>
					<th>Nombre</th>
					<th>Correo</th>
				</tr>
			</thead>
			<tbody>
				<tr v-for="usuario in usuarios" :key="usuario.id">
					<td>{{ usuario.id }}</td>
					<td>{{ usuario.nombre }}</td>
					<td>{{ usuario.correo }}</td>
				</tr>
			</tbody>
		</table>

	</div>

	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	<script>
	  const { createApp, ref } = Vue

	createApp({
	    data() {
	      return {
	        email: '',
	        password: '',
	        acceso: false,
	        usuarios: []
	      }
	    },
	    methods: {
	      onSubmit() {
	        fetch('./vue.json')
	          .then(response => response.json())
	          .then(datos => {
	            datos.usuarios.forEach(usuario => {
	              if (usuario.correo === this.email && usuario.contraseÃ±a === this.password) {
	                this.acceso = true;
	                this.cargarUsuarios(datos.usuarios);
	              }
	            });
	          })
	          .catch(() => {
	            console.log('Error al cargar los datos');
	          });
	      },
	      cargarUsuarios(usuarios) {
	        this.usuarios = usuarios;
	      }
	    }
	  }).mount('#main')
	</script>
</body>
</html>
