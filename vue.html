<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
	
	<div id="main">

		<h2>
			Acceso super seguro
		</h2>
		
		<form v-if="!acceso" @submit.prevent="onSubmit">
			<fieldset>
				<label>
					Nombre: 
				</label>
				<input v-model="email" placeholder="email Here" name="">
			</fieldset>
			<fieldset>
				<label>
					Password: 
				</label>
				<input v-model="password" placeholder="password Here" type="password" name="">
			</fieldset>
			<button type="submit">
				Acceder
			</button>
		</form>

		<p v-if="acceso">Has accedido correctamente.</p>

	</div>

	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	<script>
	  	const { createApp, ref } = Vue

	  	createApp({
			setup() {
				const email = ref('');
				const password = ref('');
				const acceso = ref(false);
				
				const onSubmit = () => {
					fetch('./vue.json')
					.then(response => response.json())
					.then(datos => {
						// Verificar las credenciales
						datos.usuarios.forEach(usuario => {
							if (usuario.correo === email.value && usuario.contraseÃ±a === password.value) {
								acceso.value = true;
							}
						});
					})
					.catch(() => {
						console.log('Error al cargar los datos');
					});
				}

				return {
					email,
					password,
					acceso,
					onSubmit
				}
			}
		}).mount('#main')

	</script>
</body>
</html>